"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5186],{95186:function(e,a,t){t.r(a),t.d(a,{PutOnSaleRef:function(){return v}});var r=t(85893),s=t(67294);t(19755);var n=t(37918),o=t.n(n);t(8882);var c=t(71439),i=t(24021);t(30);var l=t(6103),d=t(72213),m=t(93451),u=t(97416),p=t(55678);p.Am.configure();let h=l.Z.toasterOption,v=(0,s.forwardRef)((e,a)=>{let[n,v]=(0,s.useState)(""),[w,g]=(0,s.useState)(""),[b,x]=(0,s.useState)(""),[k,y]=(0,s.useState)([]),[_,f]=(0,s.useState)(""),[N,j]=(0,s.useState)({}),[S,P]=(0,s.useState)(0),[C,T]=(0,s.useState)(0),[A,Z]=(0,s.useState)(0),[F,O]=(0,s.useState)(l.Z.currencySymbol),[I,H]=(0,s.useState)(0),[R,L]=(0,s.useState)(l.Z.currencySymbol),[$,B]=(0,s.useState)(0),[E,M]=(0,s.useState)(),U=async e=>{var a=await (0,d.I)();let t=new(o())(a&&a.provider&&null!=a.provider&&void 0!=a.provider&&""!=a.provider?a.provider:window.ethereum);if(await t.eth.getAccounts(),e&&e.target&&void 0!==e.target.value&&e.target.name){var r=e.target.value;if("TokenPrice"===e.target.name){if(T(r),""!=r&&!1==isNaN(r)&&r>0){var s=await t.utils.toWei(r.toString());if(console.log(r,"value"),M(r),721==W.type)var n=new t.eth.Contract(i,W.contractAddress),m=await n.methods.getServiceFee().call();else var n=new t.eth.Contract(c,W.contractAddress),m=await n.methods.getServiceFee().call();var u=s*m/1e20;P(parseFloat((s-u)/l.Z.decimalvalues).toFixed(l.Z.toFixed))}Q({TokenPrice:r})}}},D=async()=>{document.getElementById("TokenPrice").value=""},Q=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a={},t=void 0!==e.TokenPrice?e.TokenPrice:C;return""==t?a.TokenPrice='"Token Price" is not allowed to be empty':0==t?a.TokenPrice='"Token Price" must be greater than 0':!0==isNaN(t)?a.TokenPrice='"Token Price" must be a number':0>Math.sign(C)?a.TokenPrice="Price must be a possitive number":delete a.TokenPrice,j(a),a};function Y(e){var a=0>+e?"-":"",t=e.toString();if(!/e/i.test(t))return e;var[r,s,n]=e.toString().replace(/^-/,"").replace(/^([0-9]+)(e.*)/,"$1.$2").split(/e|\./);return 0>+n?a+"0."+"0".repeat(Math.max(Math.abs(n)-1||0,0))+r+s:a+r+(+n>=s.length?s+"0".repeat(Math.max(+n-s.length||0,0)):s.slice(0,+n)+"."+s.slice(+n))}async function G(){if(0!=Object.keys(await Q()).length)return window.$("#PutOnSale_modal").modal("show"),!1;var a=await (0,d.I)();let t=new(o())(a&&a.provider&&null!=a.provider&&void 0!=a.provider&&""!=a.provider?a.provider:window.ethereum);if(await t.eth.getAccounts()&&t&&t.eth){if(721==W.type){var r=new t.eth.Contract(i,W.contractAddress);f("processing");var s=C.toString();s=await Y(s=await K(s=parseFloat(s)*l.Z.decimalvalues,l.Z.decimalvalues)),r.methods.orderPlace(e.item.tokenCounts,s.toString()).send({from:e.Accounts}).then(async a=>{f("done");var t=await (0,m.pQ)({tokenOwner:q,tokenCounts:e.item.tokenCounts,price:C,biddingtoken:F,blockHash:a.blockHash,transactionHash:a.transactionHash,TokenPrice_Initial:A});t.data&&t.data.RetType&&"success"==t.data.RetType&&(p.Am.success(" NFT places for sale on marketplace",h),window.$("#PutOnSale_modal").modal("hide"),setTimeout(()=>{window.location.reload(!1)},2e3))}).catch(e=>{f("error"),p.Am.error("Transaction rejected by user",h)})}else{var r=new t.eth.Contract(c,W.contractAddress);f("processing");let a=C.toString();a=await Y(a=await K(a=parseFloat(a)*l.Z.decimalvalues,l.Z.decimalvalues)),r.methods.orderPlace(e.item.tokenCounts,a.toString()).send({from:e.Accounts}).then(async a=>{f("done");var t=await (0,m.pQ)({tokenOwner:q,tokenCounts:e.item.tokenCounts,price:C,biddingtoken:F,blockHash:a.blockHash,transactionHash:a.transactionHash,TokenPrice_Initial:A});t.data&&t.data.RetType&&"success"==t.data.RetType&&(p.Am.success(" NFT places for sale on marketplace",h),window.$("#PutOnSale_modal").modal("hide"),setTimeout(()=>{window.location.reload(!1)},2e3))}).catch(e=>{f("error"),p.Am.error("Transaction rejected by user",h)})}}}async function K(e,a){var t=0;e=parseFloat(e);try{var r=e.toString().split(".");return t=r[1]&&r[1].length&&r[1].length>0?r[0]:e}catch(e){return t}}var{item:W,UserAccountAddr:q,UserAccountBal:z,Set_NoOfToken:J,NoOfToken:V}=e;async function X(){try{var e=await (0,d.I)();let s=new(o())(e&&e.provider&&null!=e.provider&&void 0!=e.provider&&""!=e.provider?e.provider:window.ethereum);if(await s.eth.getAccounts(),721==W.type)var a=new s.eth.Contract(i,W.contractAddress),t=await a.methods.getServiceFee().call();else var a=new s.eth.Contract(c,W.contractAddress),t=await a.methods.getServiceFee().call();var r=t/l.Z.decimalvalues;H(r)}catch(e){}}return(0,s.useEffect)(()=>{X(),j({})},[]),(0,s.useImperativeHandle)(a,()=>({async PutOnSale_Click(a,t){var r=await (0,d.I)();let s=new(o())(r&&r.provider&&null!=r.provider&&void 0!=r.provider&&""!=r.provider?r.provider:window.ethereum);if(X(a),!localStorage.getItem("nilwireMetamask"))return p.Am.error("Please connect to a Metamask wallet",h),!1;if(e.Set_HitItem(a),t&&t.currency&&(t&&(t.currency,l.Z.owntokenSymbol),L(t.currency),O(t.currency)),721==t.type){var n=new s.eth.Contract(i,a.contractAddress),m=await n.methods.getServiceFee().call(),u=m/l.Z.decimalvalues;H(u),Z(t.price),j({}),window.$("#PutOnSale_modal").modal("show")}else{var n=new s.eth.Contract(c,a.contractAddress),m=await n.methods.getServiceFee().call(),u=m/l.Z.decimalvalues;H(u),Z(t.price),j({}),window.$("#PutOnSale_modal").modal("show")}Z(t.price),j({}),window.$("#PutOnSale_modal").modal("show")}})),(0,r.jsxs)("div",{children:["processing"==_&&(0,r.jsx)("div",{className:"transLoading",children:(0,r.jsx)("img",{src:t(6514),className:"img-fluid",alt:""})}),(0,r.jsx)("div",{className:"modal fade primary_modal",id:"PutOnSale_modal","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"accept_modalCenteredLabel","aria-hidden":"true",children:(0,r.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:(0,r.jsxs)("div",{className:"modal-content form-border",children:[(0,r.jsxs)("div",{className:"modal-header text-center",children:[(0,r.jsx)("h5",{className:"modal-title",id:"PutOnSale_modalLabel",children:"NFT for Sale"}),(0,r.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,r.jsx)("span",{"aria-hidden":"true",onClick:D,children:"\xd7"})})]}),(0,r.jsxs)("div",{className:"modal-body",children:[(0,r.jsx)("div",{className:"img_accept text-center",children:W&&W.image&&"mp4"==W.image.split(".").pop()?(0,r.jsx)("video",{src:"".concat(l.Z.Back_URL,"nftImg/").concat(W.tokenCreator,"/").concat(W.image),type:"video/mp4",alt:"Collections",className:"img-fluid img-rounded mb-sm-30",controls:!0,controlsList:"nodownload"}):W&&W.image&&"mp3"==W.image.split(".").pop()||W&&W.image&&"wav"==W.image.split(".").pop()?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{src:"".concat(l.Z.Back_URL,"images/music.png"),alt:"",className:"img-fluid img-rounded mb-sm-30"}),W&&W.image&&"mp3"==W.image.split(".").pop()||W&&W.image&&"wav"==W.image.split(".").pop()?(0,r.jsx)("audio",{src:"".concat(l.Z.Back_URL,"nftImg/").concat(W.tokenCreatorInfo.curraddress,"/").concat(W.image),type:"audio/mp3",controls:!0,className:"audio audio_widyth"}):""]}):(0,r.jsx)("img",{src:"".concat(l.Z.Back_URL,"nftImg/").concat(W.tokenCreator,"/").concat(W.image),alt:"Collections",className:"img-fluid img-rounded mb-sm-30"})}),(0,r.jsx)("p",{className:"text-center accept_desc mb-0 mar-top-10",children:(0,r.jsx)("span",{className:"buy_desc_sm",children:"You are about to place order for"})}),(0,r.jsxs)("p",{className:"text-center accept_desc",children:[(0,r.jsx)("span",{className:"buy_desc_sm_bold pl-2",children:W.tokenName})," ",(0,r.jsx)("span",{className:"buy_desc_sm pl-2",children:"from "}),W.userprofile&&W.userprofile.name?(0,r.jsx)("span",{className:"buy_desc_sm_bold pl-2",children:W.userprofile.name}):W&&W.tokenowners_current&&W.tokenowners_current.tokenOwner&&(0,r.jsx)("span",{className:"buy_desc_sm_bold pl-2",children:(0,u.UD)(W&&W.tokenowners_current&&W.tokenowners_current.tokenOwner)})]}),(0,r.jsx)("div",{class:"input-group mb-3 input_grp_style_1",children:(0,r.jsx)("input",{placeholder:"New Price",type:"number",onKeyDown:e=>["e","E","+","-",","].includes(e.key)&&e.preventDefault(),min:"0",name:"TokenPrice",id:"TokenPrice",class:"form-control mb-0","aria-label":"bid","aria-describedby":"basic-addon2",onChange:U,autoComplete:"off"})}),N.TokenPrice&&(0,r.jsx)("span",{className:"text-danger",children:N.TokenPrice}),(0,r.jsxs)("div",{className:"row mx-0 pb-3",children:[(0,r.jsx)("div",{className:"col-12 col-sm-6 px-4",children:(0,r.jsx)("p",{className:"buy_desc_sm",children:"ETH Service fee"})}),(0,r.jsx)("div",{className:"col-12 col-sm-6 px-4 text-sm-right",children:(0,r.jsxs)("p",{className:"buy_desc_sm_bold",children:[I," %"]})})]}),(0,r.jsxs)("div",{className:"row mx-0 pb-3",children:[(0,r.jsx)("div",{className:"col-12 col-sm-6 px-4",children:(0,r.jsx)("p",{className:"buy_desc_sm",children:"You will get"})}),(0,r.jsx)("div",{className:"col-12 col-sm-6 px-4 text-sm-right",children:(0,r.jsxs)("p",{className:"buy_desc_sm_bold",children:[S," ",F]})})]}),(0,r.jsx)("form",{className:"px-4",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{class:"btn-NewBlock text-center",children:[(0,r.jsxs)("button",{className:"btn-main lead mar-top-10 mar-right-15",type:"button",onClick:()=>G(),disabled:"processing"==_,children:["processing"==_&&(0,r.jsx)("i",{class:"fa fa-spinner mr-3 spinner_icon","aria-hidden":"true",id:"circle1"}),"Continue"]}),(0,r.jsx)("button",{className:"btn-main btnGrey lead mar-top-10","data-dismiss":"modal","aria-label":"Close",type:"button",onClick:D,children:"Cancel"})]})})})]})]})})})]})})}}]);