"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6821],{6821:function(e,a,t){t.r(a),t.d(a,{PutOnBid:function(){return b}});var i=t(85893),n=t(67294);t(19755);var r=t(37918),s=t.n(r);t(8882);var d=t(71439),l=t(24021);t(30);var o=t(6103),c=t(72213);t(23300);var m=t(8660),u=t.n(m);t(1342);var p=t(93451),h=t(97416),v=t(55678);v.Am.configure();let x=o.Z.toasterOption,b=(0,n.forwardRef)((e,a)=>{var t=new Date,r=t.setDate(t.getDate()+parseInt(1)),m=new Date(r);let[b,w]=(0,n.useState)(""),[g,j]=(0,n.useState)(""),[y,D]=(0,n.useState)(""),[_,f]=(0,n.useState)([]),[P,k]=(0,n.useState)(""),[M,S]=(0,n.useState)({}),[N,C]=(0,n.useState)(0),[B,E]=(0,n.useState)(0),[F,T]=(0,n.useState)(0),[A,L]=(0,n.useState)(0),[I,O]=(0,n.useState)(o.Z.currencySymbol),[R,Z]=(0,n.useState)(0),[$,U]=(0,n.useState)(o.Z.currencySymbol),[G,H]=(0,n.useState)(new Date),[K,q]=(0,n.useState)(new Date),[Y,z]=(0,n.useState)("Right after listing"),[J,Q]=(0,n.useState)("1 Day"),[V,W]=(0,n.useState)(new Date),[X,ee]=(0,n.useState)(m),[ea,et]=(0,n.useState)(0),ei=async()=>{document.getElementById("MinPrice").value="",document.getElementById("MaxPrice").value=""},en=async e=>{var a=await (0,c.I)();let t=new(s())(a&&a.provider&&null!=a.provider&&void 0!=a.provider&&""!=a.provider?a.provider:window.ethereum);if(await t.eth.getAccounts(),e&&e.target&&void 0!==e.target.value&&e.target.name){var i=e.target.value;switch(console.log(i,"valuevalue"),console.log(e.target.name,"nameee"),e.target.name){case"MinPrice":E(i),er({MinPrice:i});break;case"MaxPrice":T(i),er({MaxPrice:i})}}},er=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a={},t=void 0!==e.MinPrice?e.MinPrice:void 0!==e.MaxPrice?e.MaxPrice:B,i=void 0!==e.MinPrice?e.MinPrice:void 0!==e.MaxPrice?e.MaxPrice:F;return""==t||""==i?a.TokenPrice='"Price" is not allowed to be empty':0==t||0==i?a.TokenPrice='"Price" must be greater than 0':!0==isNaN(t)||!0==isNaN(i)?(console.loh("in1"),a.TokenPrice='"Price" must be a number'):0>Math.sign(t)||0>Math.sign(i)?a.TokenPrice="Price must be a possitive number":void 0!==e.MaxPrice&&parseFloat(B)>parseFloat(t)?a.MinPrice="Maximum Price must be Greater than Minimum Price":void 0!==e.MinPrice&&parseFloat(t)>parseFloat(F)?a.MinPrice="Maximum Price must be Greater than Minimum Price":void 0===e.MinPrice&&void 0===e.MaxPrice&&(void 0==parseFloat(B)||null==parseFloat(B)||""==parseFloat(B))?a.MinPrice='"Price" must be a number':void 0===e.MinPrice&&void 0===e.MaxPrice&&(void 0==parseFloat(F)||null==parseFloat(F)||""==parseFloat(F))?a.TokenPrice='"Price" must be a number':void 0===e.MinPrice&&void 0===e.MaxPrice&&void 0!==B&&void 0!==F&&parseFloat(B)>parseFloat(F)?a.MinPrice="Maximum Price must be Greater than Minimum Price":delete a.TokenPrice,S(a),a};async function es(){var a=await er();if(console.log(a,"error"),0!=Object.keys(a).length)return window.$("#PutOnBid_modal").modal("show"),v.Am.error("Form validation error, please fill all the required fields",x),!1;var t=new Date,i=new Date(V);"Right after listing"==Y&&(W(t),i=t);var n=new Date(V),r=new Date(X);if(n.setSeconds(0),r.setSeconds(0),new Date(t)>new Date(i))v.Am.error("Start date & Time must be greater than now",x);else if(Date.parse(n)>=Date.parse(r))v.Am.error('"End date" & Time must be greater than start date and Time',x);else if(721==ed.type){k("processing");var s=await (0,p.j_)({address:e.Accounts,tokenCounts:e.item.tokenCounts,minprice:B,maxprice:F,starttime:V,endtime:X});console.log(s,"Ejmbbbbbuwek"),s.data&&s.data.RetType&&"success"==s.data.RetType&&(v.Am.success(" NFT places for sale on marketplace",x),window.$("#PutOnBid_modal").modal("hide"),setTimeout(()=>{window.location.reload(!1)},2e3))}}var{item:ed,UserAccountAddr:el,UserAccountBal:eo,Set_NoOfToken:ec,NoOfToken:em}=e;async function eu(){try{var e=await (0,c.I)();let n=new(s())(e&&e.provider&&null!=e.provider&&void 0!=e.provider&&""!=e.provider?e.provider:window.ethereum);if(await n.eth.getAccounts(),721==ed.type)var a=new n.eth.Contract(l,ed.contractAddress),t=await a.methods.getServiceFee().call();else var a=new n.eth.Contract(d,ed.contractAddress),t=await a.methods.getServiceFee().call();var i=t/o.Z.decimalvalues;Z(i)}catch(e){}}async function ep(e,a){if("StartDateDropDown"==e)"PickStartDate"==a?eh("calendar_modal","show"):z("Right after listing");else if("EndDateDropDown"==e){if("PickEndDate"==a)eh("calendar_modal_expire","show");else{Q(a);var t=new Date,i=t.setDate(t.getDate()+parseInt(a));ee(new Date(i))}}}async function eh(e,a){if(window.$("#"+e).modal(a),"calendar_modal"==e){if(V){var t=new Date(V);t.setSeconds(0);var i=t.toLocaleString();z(i)}}else if("calendar_modal_expire"==e&&X){var t=new Date(X);t.setSeconds(0);var i=t.toLocaleString();Q(i)}}return(0,n.useEffect)(()=>{eu(),S({})},[]),(0,n.useImperativeHandle)(a,()=>({async PutOnBid_Click(a,t){var i=await (0,c.I)();let n=new(s())(i&&i.provider&&null!=i.provider&&void 0!=i.provider&&""!=i.provider?i.provider:window.ethereum);if(eu(a),!localStorage.getItem("nilwireMetamask"))return v.Am.error("Please connect to a Metamask wallet",x),!1;if(e.Set_HitItem(a),t&&t.currency&&(t&&(t.currency,o.Z.owntokenSymbol),U(t.currency),O(t.currency)),721==t.type){var r=new n.eth.Contract(l,a.contractAddress),m=await r.methods.getServiceFee().call(),u=m/o.Z.decimalvalues;Z(u),L(t.price),S({}),window.$("#PutOnBid_modal").modal("show")}else{var r=new n.eth.Contract(d,a.contractAddress),m=await r.methods.getServiceFee().call(),u=m/o.Z.decimalvalues;Z(u),L(t.price),S({}),window.$("#PutOnBid_modal").modal("show")}L(t.price),S({}),window.$("#PutOnBid_modal").modal("show")}})),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"modal fade primary_modal",id:"PutOnBid_modal","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-labelledby":"accept_modalCenteredLabel","aria-hidden":"true",children:[(0,i.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:(0,i.jsxs)("div",{className:"modal-content form-border",children:[(0,i.jsxs)("div",{className:"modal-header text-center",children:[(0,i.jsx)("h5",{className:"modal-title",id:"PutOnBid_modalLabel",children:"NFT for Sale"}),(0,i.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:(0,i.jsx)("span",{"aria-hidden":"true",onClick:ei,children:"\xd7"})})]}),(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsx)("div",{className:"img_accept text-center",children:ed&&ed.image&&"mp4"==ed.image.split(".").pop()?(0,i.jsx)("video",{src:"".concat(o.Z.Back_URL,"nftImg/").concat(ed.tokenCreator,"/").concat(ed.image),type:"video/mp4",alt:"Collections",className:"img-fluid img-rounded mb-sm-30",controls:!0,controlsList:"nodownload"}):ed&&ed.image&&"mp3"==ed.image.split(".").pop()||ed&&ed.image&&"wav"==ed.image.split(".").pop()?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:"".concat(o.Z.Back_URL,"images/music.png"),alt:"",className:"img-fluid img-rounded mb-sm-30"}),ed&&ed.image&&"mp3"==ed.image.split(".").pop()||ed&&ed.image&&"wav"==ed.image.split(".").pop()?(0,i.jsx)("audio",{src:"".concat(o.Z.Back_URL,"nftImg/").concat(ed.tokenCreatorInfo.curraddress,"/").concat(ed.image),type:"audio/mp3",controls:!0,className:"audio audio_widyth"}):""]}):(0,i.jsx)("img",{src:"".concat(o.Z.Back_URL,"nftImg/").concat(ed.tokenCreator,"/").concat(ed.image),alt:"Collections",className:"img-fluid img-rounded mb-sm-30"})}),(0,i.jsx)("p",{className:"text-center accept_desc mb-0 mar-top-10",children:(0,i.jsx)("span",{className:"buy_desc_sm",children:"You are about to place Bid for"})}),(0,i.jsxs)("p",{className:"text-center accept_desc",children:[(0,i.jsx)("span",{className:"buy_desc_sm_bold pl-2",children:ed.tokenName})," ",(0,i.jsx)("span",{className:"buy_desc_sm pl-2",children:"from "}),ed.userprofile&&ed.userprofile.name?(0,i.jsx)("span",{className:"buy_desc_sm_bold pl-2",children:ed.userprofile.name}):ed&&ed.tokenowners_current&&ed.tokenowners_current.tokenOwner&&(0,i.jsx)("span",{className:"buy_desc_sm_bold pl-2",children:(0,h.UD)(ed&&ed.tokenowners_current&&ed.tokenowners_current.tokenOwner)})]}),(0,i.jsx)("div",{class:"input-group mb-3 input_grp_style_1",children:(0,i.jsx)("input",{placeholder:"Enter Minimum bid amount",type:"number",onKeyDown:e=>["e","E","+","-",","].includes(e.key)&&e.preventDefault(),min:"0",name:"MinPrice",id:"MinPrice",class:"form-control mb-0","aria-label":"bid","aria-describedby":"basic-addon2",onChange:en,autoComplete:"off"})}),M.MinPrice&&(0,i.jsx)("span",{className:"text-danger",children:M.MinPrice}),(0,i.jsx)("div",{class:"input-group mb-3 input_grp_style_1",children:(0,i.jsx)("input",{placeholder:"Enter Maximum bid amount",type:"number",onKeyDown:e=>["e","E","+","-",","].includes(e.key)&&e.preventDefault(),min:"0",name:"MaxPrice",id:"MaxPrice",class:"form-control mb-0","aria-label":"bid","aria-describedby":"basic-addon2",onChange:en,autoComplete:"off"})}),M.TokenPrice&&(0,i.jsx)("span",{className:"text-danger",children:M.TokenPrice}),(0,i.jsxs)("div",{class:"row",children:[(0,i.jsx)("div",{class:"col-md-6",children:(0,i.jsxs)("div",{className:"drobdown_section",children:[(0,i.jsx)("label",{className:"primary_label",children:"Starting date"}),(0,i.jsxs)("div",{class:"dropdown",children:[(0,i.jsx)("button",{class:"btn btn-secondary dropdown-toggle filter_btn inp_btn m-0 text-left w-100",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:(0,i.jsx)("span",{id:"menuBut",children:Y})}),(0,i.jsxs)("div",{class:"dropdown-menu filter_menu","aria-labelledby":"dropdownMenuButton",children:[(0,i.jsx)("div",{id:"RightAfterListing",onClick:()=>{ep("StartDateDropDown","RightAfterListing")},children:"Right after listing"}),(0,i.jsx)("div",{id:"PickStart",onClick:()=>{ep("StartDateDropDown","PickStartDate")},children:"Pick specific date"})]}),M.StartDate&&(0,i.jsx)("span",{className:"text-danger",children:M.StartDate})]})]})}),(0,i.jsx)("div",{class:"col-md-6",children:(0,i.jsxs)("div",{className:"drobdown_section",children:[(0,i.jsx)("label",{className:"primary_label",children:"Expiration date"}),(0,i.jsxs)("div",{class:"dropdown",children:[(0,i.jsx)("button",{class:"btn btn-secondary dropdown-toggle filter_btn inp_btn m-0 text-left w-100",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:(0,i.jsx)("span",{id:"menuBut",children:J})}),(0,i.jsxs)("div",{class:"dropdown-menu filter_menu","aria-labelledby":"dropdownMenuButton",children:[(0,i.jsx)("div",{onClick:()=>{ep("EndDateDropDown","1 Day")},children:"1 Day"}),(0,i.jsx)("div",{onClick:()=>{ep("EndDateDropDown","3 Day")},children:"3 Day"}),(0,i.jsx)("div",{onClick:()=>{ep("EndDateDropDown","5 Day")},children:"5 Day"}),(0,i.jsx)("div",{onClick:()=>{ep("EndDateDropDown","7 Day")},children:"7 Day"}),(0,i.jsx)("div",{onClick:()=>{ep("EndDateDropDown","PickEndDate")},children:"Pick specific date"})]}),M.EndDate&&(0,i.jsx)("span",{className:"text-danger",children:M.EndDate})]})]})}),(0,i.jsx)("div",{class:"spacer-single"})]}),(0,i.jsx)("form",{className:"px-4",children:(0,i.jsx)("div",{className:"text-center",children:(0,i.jsxs)("div",{class:"btn-NewBlock text-center",children:[(0,i.jsxs)("button",{className:"btn-main lead mar-top-10 mar-right-15",type:"button",onClick:()=>es(),disabled:"processing"==P,children:["processing"==P&&(0,i.jsx)("i",{class:"fa fa-spinner mr-3 spinner_icon","aria-hidden":"true",id:"circle1"}),"Continue"]}),(0,i.jsx)("button",{className:"btn-main btnGrey lead mar-top-10","data-dismiss":"modal","aria-label":"Close",type:"button",onClick:ei,children:"Cancel"})]})})})]})]})}),(0,i.jsx)("div",{class:"modal fade primary_modal",id:"calendar_modal",tabindex:"-1",role:"dialog","aria-labelledby":"calendar_modalCenteredLabel","aria-hidden":"true",children:(0,i.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-sm",role:"document",children:(0,i.jsx)("div",{class:"modal-content",children:(0,i.jsxs)("div",{class:"modal-module",children:[(0,i.jsxs)("div",{class:"modal-header text-center",children:[(0,i.jsx)("h5",{class:"modal-title",id:"calendar_modalLabel",children:"Choose date"}),(0,i.jsx)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",id:"cancelcalender",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsx)("div",{class:"modal-body",children:(0,i.jsx)("div",{className:"pb-3",children:(0,i.jsx)(u(),{minDate:new Date().getTime(),input:!1,value:V,onChange:e=>W(e)})})}),(0,i.jsx)("div",{class:"text-center mb-3",children:(0,i.jsx)("input",{type:"submit",name:"Done",value:"Done",className:"primary_btn",id:"doneStartDate",onClick:()=>eh("calendar_modal","hide")})})]})})})}),(0,i.jsx)("div",{class:"modal fade primary_modal",id:"calendar_modal_expire",tabindex:"-1",role:"dialog","aria-labelledby":"calendar_modalCenteredLabel","aria-hidden":"true",children:(0,i.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-sm",role:"document",children:(0,i.jsx)("div",{class:"modal-content",children:(0,i.jsxs)("div",{class:"modal-module",children:[(0,i.jsxs)("div",{class:"modal-header text-center",children:[(0,i.jsx)("h5",{class:"modal-title",id:"calendar_modalLabel",children:"Choose date"}),(0,i.jsx)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",id:"cancelcalender",children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,i.jsx)("div",{class:"modal-body",children:(0,i.jsx)("div",{className:"pb-3",children:(0,i.jsx)(u(),{input:!1,value:X,minDate:new Date().getTime(),onChange:e=>ee(e)})})}),(0,i.jsx)("div",{class:"text-center mb-3",children:(0,i.jsx)("input",{type:"submit",name:"Done",value:"Done",className:"primary_btn",id:"doneEndDate",onClick:()=>eh("calendar_modal_expire","hide")})})]})})})})]})})})}}]);