(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7582],{47582:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return N}});var s=t(85893),i=t(67294),l=t(41662),r=t(81268),n=t(80471);t(1974);var o=t(19755),c=t.n(o),d=t(37918),m=t.n(d);t(8882);var p=t(6103),u=t(55678);t(90473);var f=t(25184),x=t(72213),h=t(64593);t(733);var g=t(79655),v=t(97416);u.Am.configure();let b=p.Z.toasterOption;function j(){return(0,i.useEffect)(()=>{window.scrollTo(0,0)},[]),null}function N(){let[e,a]=i.useState(""),[o,d]=(0,i.useState)({}),[N,y]=i.useState(""),[w,_]=i.useState(0),[k,S]=i.useState("false"),[C,U]=i.useState(""),[F,P]=i.useState(""),[A,R]=i.useState(""),[V,I]=i.useState("");var B=p.Z.Back_URL+"cover/5.jpg";let[E,L]=i.useState(B),[O,T]=i.useState("no"),[Z,M]=(0,i.useState)(""),[W,q]=(0,i.useState)(""),[z,D]=(0,i.useState)({}),[G,Y]=(0,i.useState)("no"),[J,X]=i.useState(!1);async function H(){var e=await (0,v.my)();if(e&&null!=e&&void 0!=e&&""!=e){X(!0);try{var a=await (0,v.Et)({addr:e});a&&a.data&&a.data.data&&(console.log(a.data.data,"Resp.data.data"),q(a.data.data.User.email),M(a.data.data.User.mobile),console.log(a.data.data.User.coverimage,a.data.data.User.length,"======TokenFilePreUrlTokenFilePreUrl"),a.data.data.User&&a.data.data.User.coverimage&&null!=a.data.data.User.coverimage&&void 0!=a.data.data.User.coverimage&&""!=a.data.data.User.coverimage?(console.log(p.Z.Back_URL+"cover/"+a.data.data.User.coverimage,"=====TokenFilePreUrlTokenFilePreUrl"),L(p.Z.Back_URL+"cover/"+a.data.data.User.coverimage),T("yes")):(L(p.Z.Back_URL+"cover/5.jpg"),T("yes")))}catch(e){}}}(0,i.useEffect)(()=>{H()},[]);let K=async e=>{if(e.target&&e.target.files){var a=new FileReader,t=e.target.files[0],s=t.name;s.substr(s.lastIndexOf(".")+1);let n=t.size/1024/1024;if(console.log(a,t,s,"fhejhbef"),n>30)return u.Am.error("File size exceeds 30 MB",b),c()("input[name='image']").val(""),!1;U(t),a.readAsDataURL(t),a.onloadend=(async function(e){a.result&&L(a.result)}).bind(this);var i="";i=await (0,v.my)();var l=new FormData;t&&l.append("CoverImage",t),l.append("addr",i);var r=await (0,v.IO)(l);r&&r.data&&r.data.data&&((0,f.x)("success","Cover Updated Successfully","success"),setTimeout(()=>{window.location.reload(!1)},1e3))}},Q=async e=>{if(console.log(e.target,"ee"),e.target&&e.target.files){var a=new FileReader,t=e.target.files[0],s=t.name;s.substr(s.lastIndexOf(".")+1);let i=t.size/1024/1024;if(i>10)return u.Am.error("File size exceeds 10 MB",b),c()("input[name='image']").val(""),!1;U(t),a.readAsDataURL(t),a.onloadend=(async function(e){a.result&&R(a.result)}).bind(this)}},$=e=>{if(void 0!==e.target.value){var a=e.target.value;o[e.target.name]=a,d(o)}};async function ee(){var e;if(e=o.email,/\S+@\S+\.\S+/.test(e)){var a=await (0,v.my)();if(a){if("pending"==G&&o.otp&&null!=o.otp&&void 0!=o.otp&&""!=o.otp){var t={email:o.email,addr:a,otp:o.otp},s=await (0,v.r)(t);s&&s.data&&s.data.data&&s.data.data.otpverified&&(Y("success"),o.otpverified=s.data.data.otpverified,d(o),window.location.reload())}else{if("no"!=G)return u.Am.error("Verify Email to Proceed Further",b),!1;var t={email:o.email,addr:a},s=await (0,v.aX)(t);console.log("iminininverify",s),s&&s.data&&s.data.data&&s.data.data.email&&(o.otpverified=s.data.data.otpverified,Y("pending"),d(o))}}else u.Am.error("Please Connect Wallet To Proceed Further",b)}else u.Am.error("Invalid Email",b)}let ea=e=>{if(e){var a,t,s={};function i(e){return/\s/g.test(e)}return(o&&""==o.email||void 0==o.email)&&(s.email="E-mail field is required"),a=o.email,/\S+@\S+\.\S+/.test(a)||(s.email="Invalid Email"),t=o.name,/[^a-zA-Z ]/g.test(t)&&(s.name="Special Charactar & numbers not allowed"),(""==o.name||void 0==o.name)&&(s.name="Name field is required"),i(o.facebook)&&(s.facebook="Space not accepted link field"),i(o.youtube)&&(s.youtube="Space not accepted link field"),i(o.instagram)&&(s.instagram="Space not accepted link field"),i(o.twitter)&&(s.twitter="Space not accepted link field"),i(o.personalsite)&&(s.personalsite="Space not accepted link field"),D(s),s}},et=async()=>{var e=await (0,x.I)();let a=new(m())(e&&e.provider&&null!=e.provider&&void 0!=e.provider&&""!=e.provider?e.provider:window.ethereum);console.log("=====================adfter");var t=await a.eth.getAccounts();if(t){var s=await ea(!0);console.log(s,"--------------errors");var i=Object.keys(s).length;0!=i?console.log(i,"Wewr"):a.eth.personal.sign("Your profile is being updated",t[0].toLowerCase(),"Your profile is being updated").then(async()=>{var e=new FormData;C&&e.append("Image",C),e.append("addr",t[0].toLowerCase()),e.append("name",o.name?o.name:""),e.append("personalsite",o.personalsite?o.personalsite:""),e.append("customurl",o.customurl?o.customurl:""),e.append("email",o.email?o.email:""),e.append("bio",o.bio?o.bio:""),e.append("twitter",o.twitter?o.twitter:""),M(o.mobile),e.append("youtube",o.youtube?o.youtube:""),e.append("facebook",o.facebook?o.facebook:""),e.append("instagram",o.instagram?o.instagram:""),e.append("mobile",o.mobile?o.mobile:"");var a=await (0,v.DB)(e);a&&a.data&&a.data.toast&&a.data.toast.type&&"success"==a.data.toast.type?window.location.reload(!1):u.Am.error(a.data.toast.msg,b)})}else u.Am.error("Connect Your Wallet to Proceed Further",b)};async function es(){if(""!=o.email&&void 0!=o.email){var e=await (0,v.Mb)({email:o.email,useraddress:await (0,v.my)()});e&&e.result&&"Updated Successfully"==e.result.message&&u.Am.success("Request Submitted Successfully",b)}else u.Am.error("Invalid Mail Id",b)}var B=p.Z.Back_URL+"cover/5.jpeg";return(0,s.jsxs)("div",{id:"wrapper",children:[(0,s.jsxs)(h.q,{children:[(0,s.jsx)("meta",{charSet:"utf-8"}),(0,s.jsx)("title",{children:"Nilwire - Edit Profile"})]}),(0,s.jsx)(j,{}),(0,s.jsx)(l.Z,{}),(0,s.jsx)(n.default,{Set_UserAccountAddr:a,Set_UserAccountBal:_,Set_WalletConnected:S,Set_AddressUserDetails:d,AddressUserDetails:o,Set_Accounts:y,WalletConnected:k,AfterWalletConnected:H}),localStorage.getItem("nilwireMetamask")?(0,s.jsxs)("div",{className:"no-bottom no-top",id:"content",children:[(0,s.jsx)("section",{id:"profile_banner subheader padding-bottom-40",className:"text-light",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("div",{className:"profile-bg",style:{backgroundImage:"url(".concat(E,")")},children:(0,s.jsx)("div",{class:"d-create-file coverPhotoButton",children:(0,s.jsx)("div",{className:"uploadCustomFile",children:(0,s.jsxs)("div",{className:"file_btn btn primary_btn",children:["Choose image",(0,s.jsx)("input",{className:"inp_file",type:"file",name:"image",onChange:K})]})})})}),(0,s.jsx)("span",{class:"text-muted",style:{position:"absolute",marginTop:"8px"},children:"We recommend an image of at least 1320x280 Pixels"})]})}),(0,s.jsx)("section",{className:"editProfilePageSection pt30 pb30","aria-label":"section",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row wow fadeIn form-border",children:[(0,s.jsxs)("div",{className:"col-lg-7 offset-lg-1",children:[(0,s.jsxs)("label",{className:"primary_label",children:["Upload profile photo ",(0,s.jsx)("span",{className:"text-muted",children:"(Optional)"})]}),(0,s.jsxs)("div",{class:"d-create-file",children:[(0,s.jsx)("p",{id:"file_name",children:"PNG, JPG, GIF, WEBP. Max 10 MB."}),(0,s.jsxs)("div",{className:"uploadCustomFile",children:[(0,s.jsx)("input",{type:"button",id:"get_file",class:"btn-main",value:"Browse"}),(0,s.jsx)("input",{type:"file",id:"photo",required:"true",name:"image",class:"btn-main",onChange:Q})]})]}),(0,s.jsx)("div",{class:"spacer-single"}),(0,s.jsxs)("div",{className:"form-row row",children:[(0,s.jsxs)("div",{className:"form-group col-md-6",children:[(0,s.jsxs)("label",{className:"primary_label",htmlFor:"name",children:["Display name ",(0,s.jsx)("span",{className:"text-muted",children:"(Required)"})]}),(0,s.jsx)("input",{placeholder:"Enter your display name",type:"text",className:"form-control primary_inp",name:"name",id:"name",onChange:$,defaultValue:o.name}),z.name&&(0,s.jsx)("span",{className:"text-danger",children:z.name})]}),(0,s.jsxs)("div",{className:"form-group col-md-6",children:[(0,s.jsxs)("label",{className:"primary_label",htmlFor:"desccription",children:["Custom URL ",(0,s.jsx)("span",{className:"text-muted",children:"(Optional)"})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("div",{class:"input-group-prepend",children:"".concat(p.Z.Front_URL,"/user/")}),(0,s.jsx)("input",{type:"text",className:"form-control primary_inp mb-0",id:"customurl",name:"customurl",onChange:$,defaultValue:o&&o.customurl?o.customurl:""})]})]})]}),(0,s.jsxs)("div",{className:"form-row row",children:[(0,s.jsxs)("div",{className:"form-group col-md-6",children:[(0,s.jsxs)("label",{className:"primary_label",htmlFor:"name",children:["Personal site or portfolio link ",(0,s.jsx)("span",{className:"text-muted",children:"(Optional)"})]}),(0,s.jsx)("input",{type:"text",className:"form-control primary_inp",id:"personalsite",name:"personalsite",onChange:$,defaultValue:o&&o.personalsite?o.personalsite:""}),z.personalsite&&(0,s.jsx)("span",{className:"text-danger",children:z.personalsite})]}),(0,s.jsxs)("div",{className:"form-group col-md-6",children:[(0,s.jsxs)("label",{className:"primary_label",htmlFor:"desccription",children:["Email ",(0,s.jsx)("span",{className:"text-muted",children:"(Required)"})]}),(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)("input",{type:"text",className:"form-control primary_inp mb-0",id:"email",name:"email",onChange:$,defaultValue:o.email}),"success"!=G&&o&&!o.otpverified?(0,s.jsx)("div",{className:"input-group-append px-0",children:(0,s.jsx)("button",{type:"button",className:"btn-main m-0 px-3",onClick:()=>ee(),children:"Verify email"})}):"success"!=G&&!o&&!o.otpverified&&(0,s.jsx)("div",{className:"input-group-append px-0",children:(0,s.jsx)("button",{type:"button",className:"btn-main m-0 px-3",onClick:()=>ee(),children:"Verify email"})})]}),(0,s.jsxs)("div",{className:"input-group mt-3",children:["pending"==G&&(0,s.jsx)("input",{type:"text",className:"form-control primary_inp mb-0",id:"otp",name:"otp",onChange:$}),"pending"==G&&(0,s.jsx)("div",{className:"input-group-append px-0",children:(0,s.jsx)("button",{type:"button",className:"btn-main m-0 px-3",onClick:()=>ee(),children:"Verify OTP"})})]}),z.email&&(0,s.jsx)("span",{className:"text-danger",children:z.email})]})]}),(0,s.jsxs)("div",{className:"form-row row",children:[(0,s.jsxs)("div",{className:"form-group col-md-6",children:[(0,s.jsxs)("label",{className:"primary_label",htmlFor:"name",children:["Bio ",(0,s.jsx)("span",{className:"text-muted",children:"(Optional)"})]}),(0,s.jsx)("textarea",{class:"form-control primary_inp",onChange:$,id:"bio",name:"bio",placeholder:"Tell us about yourself in brief",rows:"3",defaultValue:o&&o.bio?o.bio:""})]}),(0,s.jsxs)("div",{className:"form-group col-md-6",children:[(0,s.jsxs)("label",{className:"primary_label",htmlFor:"name",children:["Mobile number ",(0,s.jsx)("span",{className:"text-muted",children:"(Optional)"})]}),(0,s.jsx)("input",{placeholder:"ex: +1 123-456-7890",type:"number",className:"form-control primary_inp",id:"mobile",name:"mobile",onChange:$,defaultValue:o&&o.mobile?o.mobile:""})]})]}),(0,s.jsx)("div",{className:"form-row row mt-4",children:(0,s.jsx)("div",{className:"form-group col-md-6",children:(0,s.jsxs)("h5",{children:["Social media links ",(0,s.jsx)("span",{className:"text-muted",children:"(Optional)"})]})})}),(0,s.jsxs)("div",{className:"form-row row",children:[(0,s.jsxs)("div",{className:"form-group col-md-6",children:[(0,s.jsx)("input",{placeholder:"Twitter",type:"text",className:"form-control primary_inp",id:"twitter",name:"twitter",onChange:$,defaultValue:o&&o.twitter?o.twitter:""}),z.twitter&&(0,s.jsx)("span",{className:"text-danger",children:z.twitter})]}),(0,s.jsxs)("div",{className:"form-group col-md-6",children:[(0,s.jsx)("input",{placeholder:"Youtube",type:"text",className:"form-control primary_inp",id:"youtube",name:"youtube",onChange:$,defaultValue:o&&o.youtube?o.youtube:""}),z.youtube&&(0,s.jsx)("span",{className:"text-danger",children:z.youtube})]})]}),(0,s.jsxs)("div",{className:"form-row row",children:[(0,s.jsxs)("div",{className:"form-group col-md-6",children:[(0,s.jsx)("input",{placeholder:"Facebook",type:"text",className:"form-control primary_inp",id:"facebook",name:"facebook",onChange:$,defaultValue:o&&o.facebook?o.facebook:""}),z.facebook&&(0,s.jsx)("span",{className:"text-danger",children:z.facebook})]}),(0,s.jsxs)("div",{className:"form-group col-md-6",children:[(0,s.jsx)("input",{placeholder:"Instagram",type:"text",className:"form-control primary_inp",id:"instagram",name:"instagram",onChange:$,defaultValue:o&&o.instagram?o.instagram:""}),z.instagram&&(0,s.jsx)("span",{className:"text-danger",children:z.instagram})]})]})]}),(0,s.jsx)("div",{className:"col-lg-3",children:(0,s.jsxs)("div",{className:"createPreview profileImgPreview",children:[(0,s.jsx)("label",{className:"primary_label",children:"Profile image preview"}),(0,s.jsx)("div",{class:"nft__item",children:""!=A?(0,s.jsx)("img",{src:""!=A?A:t(44546),id:"get_file_2",class:"lazy nft__item_preview",alt:""}):o&&o.image&&""!=o.image?(0,s.jsx)("img",{src:p.Z.Back_URL+"profile/"+o.image,id:"get_file_2",class:"lazy nft__item_preview",alt:""}):(0,s.jsx)("img",{src:""!=A?A:t(44546),id:"get_file_2",class:"lazy nft__item_preview",alt:""})})]})}),(0,s.jsx)("div",{className:"col-lg-11 offset-lg-1",children:(0,s.jsx)("div",{className:"mt-3 mb-3",children:(0,s.jsx)("button",{type:"button",onClick:()=>et(),className:"btn-main",children:"Update Profile"})})}),""!=W&&void 0!=W&&""!=Z&&void 0!=Z&&(0,s.jsxs)("div",{className:"col-lg-11 offset-lg-1",children:[(0,s.jsx)("p",{className:"mb-0",children:(0,s.jsx)("label",{className:"primary_label",htmlFor:"desccription",children:"Verification"})}),o&&"inprocess"!=o.verificationstatus&&!0!=o.emailverified&&(0,s.jsx)("div",{className:"mt-0",children:(0,s.jsx)("button",{type:"button",onClick:()=>es(),className:"btn-main",children:"Request Verification"})}),o&&!0==o.emailverified&&(0,s.jsx)("button",{type:"button",className:"btn-main",children:"Verified"}),o&&"inprocess"==o.verificationstatus&&(0,s.jsx)("button",{type:"button",className:"btn-main",children:"Verification Pending"}),(0,s.jsx)("p",{className:"text-muted mt-2",children:"Get your profile verified for more visibility and gain trust on our marketplace."})]})]})})}),(0,s.jsx)(r.Z,{})]}):(0,s.jsx)("div",{className:"loader_section_",children:(0,s.jsxs)("h2",{children:["Please Connect Wallet To Proceed Further ",(0,s.jsx)("br",{})," ",!localStorage.getItem("nilwireMetamask")&&(0,s.jsxs)(g.rU,{to:"/connect-wallet",className:"btn-main",children:[(0,s.jsx)("i",{style:{marginRight:"10px"},className:"icon_wallet_alt"}),(0,s.jsx)("span",{children:"Connect wallet"})]})]})})]})}},90473:function(){}}]);